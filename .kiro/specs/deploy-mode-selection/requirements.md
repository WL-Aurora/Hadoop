# 部署模式选择界面需求文档

## 简介

部署模式选择界面是 Hadoop 分布式集群一键部署系统的第二个核心步骤，用户在完成虚拟机连接配置后，需要选择部署模式（一键部署或自定义部署）。

## 术语表

- **系统（System）**：Hadoop 分布式集群一键部署系统
- **用户（User）**：使用本系统部署 Hadoop 集群的操作人员
- **一键部署模式（Quick Deploy Mode）**：系统自动分配节点角色的部署方式
- **自定义部署模式（Custom Deploy Mode）**：用户手动配置节点角色的部署方式
- **NameNode**：HDFS 的主节点，负责管理文件系统的命名空间
- **ResourceManager**：YARN 的主节点，负责集群资源管理
- **SecondaryNameNode**：HDFS 的辅助节点，负责定期合并命名空间镜像
- **DataNode**：HDFS 的数据节点，负责存储实际数据（默认必选角色）

## 需求

### 需求 1：部署模式选择

**用户故事：** 作为用户，我想选择部署模式，以便根据我的需求快速部署或灵活配置集群

#### 验收标准

1. WHEN 用户进入部署模式选择界面，THE 系统 SHALL 显示两个部署模式选项："一键部署"和"自定义部署"
2. WHEN 用户进入部署模式选择界面，THE 系统 SHALL 默认选中"一键部署"模式
3. WHEN 用户选择"一键部署"模式，THE 系统 SHALL 显示自动分配的节点角色说明
4. WHEN 用户选择"自定义部署"模式，THE 系统 SHALL 显示节点角色配置区域
5. WHEN 用户点击"下一步"按钮，THE 系统 SHALL 保存用户选择的部署模式并跳转到集群参数配置界面

### 需求 2：一键部署模式说明

**用户故事：** 作为用户，我想了解一键部署模式的节点角色分配，以便确认是否符合我的需求

#### 验收标准

1. WHEN 用户选择"一键部署"模式，THE 系统 SHALL 显示虚拟机 1 分配为 NameNode
2. WHEN 用户选择"一键部署"模式，THE 系统 SHALL 显示虚拟机 2 分配为 ResourceManager
3. WHEN 用户选择"一键部署"模式，THE 系统 SHALL 显示虚拟机 3 分配为 SecondaryNameNode
4. WHEN 用户选择"一键部署"模式，THE 系统 SHALL 显示所有虚拟机都包含 DataNode 角色
5. WHEN 用户选择"一键部署"模式，THE 系统 SHALL 以表格或卡片形式清晰展示角色分配信息

### 需求 3：自定义部署模式配置

**用户故事：** 作为用户，我想自定义每台虚拟机的角色，以便根据实际需求灵活配置集群

#### 验收标准

1. WHEN 用户选择"自定义部署"模式，THE 系统 SHALL 为每台虚拟机提供角色选择下拉菜单
2. WHEN 用户选择"自定义部署"模式，THE 系统 SHALL 在下拉菜单中提供 NameNode、ResourceManager、SecondaryNameNode 选项
3. WHEN 用户选择"自定义部署"模式，THE 系统 SHALL 默认为所有虚拟机分配 DataNode 角色且不可取消
4. WHEN 用户为某台虚拟机选择角色，THE 系统 SHALL 允许该虚拟机同时拥有多个角色
5. WHEN 用户配置节点角色，THE 系统 SHALL 实时显示当前配置的角色分配情况

### 需求 4：角色配置验证

**用户故事：** 作为用户，我想系统验证我的角色配置是否合理，以便避免配置错误导致部署失败

#### 验收标准

1. WHEN 用户点击"下一步"按钮，THE 系统 SHALL 验证 NameNode 角色已被分配
2. WHEN 用户点击"下一步"按钮，THE 系统 SHALL 验证 ResourceManager 角色已被分配
3. WHEN 用户点击"下一步"按钮，THE 系统 SHALL 验证 SecondaryNameNode 角色已被分配
4. IF 必需角色未被分配，THEN THE 系统 SHALL 显示错误提示并阻止进入下一步
5. WHEN 角色配置验证通过，THE 系统 SHALL 保存配置并跳转到集群参数配置界面

### 需求 5：界面导航

**用户故事：** 作为用户，我想在部署模式选择界面进行导航操作，以便灵活控制部署流程

#### 验收标准

1. WHEN 用户在部署模式选择界面，THE 系统 SHALL 提供"上一步"按钮返回虚拟机连接配置界面
2. WHEN 用户在部署模式选择界面，THE 系统 SHALL 提供"下一步"按钮进入集群参数配置界面
3. WHEN 用户在部署模式选择界面，THE 系统 SHALL 提供"取消"按钮退出部署流程
4. WHEN 用户点击"上一步"按钮，THE 系统 SHALL 保留当前选择的部署模式配置
5. WHEN 用户点击"取消"按钮，THE 系统 SHALL 显示确认对话框询问是否退出

### 需求 6：配置持久化

**用户故事：** 作为用户，我想系统保存我的部署模式配置，以便下次使用时可以快速恢复

#### 验收标准

1. WHEN 用户完成部署模式选择，THE 系统 SHALL 将配置保存到本地配置文件
2. WHEN 用户再次打开系统，THE 系统 SHALL 自动加载上次保存的部署模式配置
3. WHEN 配置文件不存在，THE 系统 SHALL 使用默认配置（一键部署模式）
4. WHEN 配置文件损坏，THE 系统 SHALL 提示用户并使用默认配置
5. WHEN 保存配置失败，THE 系统 SHALL 记录日志但不阻止用户继续操作
