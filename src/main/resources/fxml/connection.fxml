<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.lyq.controller.ConnectionController"
            stylesheets="@../css/connection.css"
            styleClass="root-container"
            prefWidth="780" prefHeight="600">
    
    <!-- 顶部标题区域 -->
    <top>
        <VBox spacing="12" alignment="CENTER" styleClass="header-section">
            <padding>
                <Insets top="20" right="30" bottom="15" left="30"/>
            </padding>
            
            <Label text="Hadoop 分布式集群一键部署系统" styleClass="title-label" focusTraversable="false">
                <font>
                    <Font name="System Bold" size="20"/>
                </font>
            </Label>
            
            <Label text="虚拟机远程连接配置" styleClass="subtitle-label" focusTraversable="false">
                <font>
                    <Font name="System Bold" size="15"/>
                </font>
            </Label>
            
            <Separator prefWidth="720"/>
        </VBox>
    </top>
    
    <!-- 中间内容区域 -->
    <center>
        <VBox spacing="12" styleClass="content-section">
            <padding>
                <Insets top="20" right="30" bottom="15" left="30"/>
            </padding>
            
            <!-- 虚拟机1 -->
            <HBox spacing="8" alignment="CENTER_LEFT" styleClass="vm-row" 
                  prefWidth="720" minHeight="44" maxHeight="44" prefHeight="44">
                <Label text="虚拟机1" styleClass="vm-label" minWidth="60" focusTraversable="false">
                    <font>
                        <Font name="System Bold" size="13"/>
                    </font>
                </Label>
                
                <Label text="IP:" styleClass="field-label" minWidth="25" focusTraversable="false"/>
                <TextField fx:id="vm1IpField" text="192.168.109.101" 
                           prefWidth="140" styleClass="ip-field"/>
                
                <Label text="用户名:" styleClass="field-label" minWidth="45" focusTraversable="false"/>
                <TextField fx:id="vm1UsernameField" text="lyq" 
                           prefWidth="100" styleClass="input-field"/>
                
                <Label text="密码:" styleClass="field-label" minWidth="35" focusTraversable="false"/>
                <PasswordField fx:id="vm1PasswordField" text="123456" 
                               prefWidth="100" styleClass="input-field"/>
                <Button fx:id="vm1PasswordToggleBtn" text="显示" 
                        onAction="#handleVm1PasswordToggle" styleClass="toggle-btn" 
                        prefWidth="45" prefHeight="24"/>
                
                <Label fx:id="vm1StatusLabel" text="" styleClass="status-label" 
                       minWidth="0" maxWidth="0" visible="false" managed="false" focusTraversable="false"/>
                <Button fx:id="vm1TestBtn" text="测试" 
                        onAction="#handleTestVm1Connection" 
                        styleClass="test-btn" prefWidth="70" prefHeight="28"/>
            </HBox>
            <Label fx:id="vm1ErrorLabel" text="" styleClass="error-label" 
                   managed="false" visible="false" focusTraversable="false">
                <padding>
                    <Insets left="95"/>
                </padding>
            </Label>
            
            <!-- 虚拟机2 -->
            <HBox spacing="8" alignment="CENTER_LEFT" styleClass="vm-row" 
                  prefWidth="720" minHeight="44" maxHeight="44" prefHeight="44">
                <Label text="虚拟机2" styleClass="vm-label" minWidth="60" focusTraversable="false">
                    <font>
                        <Font name="System Bold" size="13"/>
                    </font>
                </Label>
                
                <Label text="IP:" styleClass="field-label" minWidth="25" focusTraversable="false"/>
                <TextField fx:id="vm2IpField" text="192.168.109.102" 
                           prefWidth="140" styleClass="ip-field"/>
                
                <Label text="用户名:" styleClass="field-label" minWidth="45" focusTraversable="false"/>
                <TextField fx:id="vm2UsernameField" text="lyq" 
                           prefWidth="100" styleClass="input-field"/>
                
                <Label text="密码:" styleClass="field-label" minWidth="35" focusTraversable="false"/>
                <PasswordField fx:id="vm2PasswordField" text="123456" 
                               prefWidth="100" styleClass="input-field"/>
                <Button fx:id="vm2PasswordToggleBtn" text="显示" 
                        onAction="#handleVm2PasswordToggle" styleClass="toggle-btn" 
                        prefWidth="45" prefHeight="24"/>
                
                <Label fx:id="vm2StatusLabel" text="" styleClass="status-label" 
                       minWidth="0" maxWidth="0" visible="false" managed="false" focusTraversable="false"/>
                <Button fx:id="vm2TestBtn" text="测试" 
                        onAction="#handleTestVm2Connection" 
                        styleClass="test-btn" prefWidth="70" prefHeight="28"/>
            </HBox>
            <Label fx:id="vm2ErrorLabel" text="" styleClass="error-label" 
                   managed="false" visible="false" focusTraversable="false">
                <padding>
                    <Insets left="95"/>
                </padding>
            </Label>
            
            <!-- 虚拟机3 -->
            <HBox spacing="8" alignment="CENTER_LEFT" styleClass="vm-row" 
                  prefWidth="720" minHeight="44" maxHeight="44" prefHeight="44">
                <Label text="虚拟机3" styleClass="vm-label" minWidth="60" focusTraversable="false">
                    <font>
                        <Font name="System Bold" size="13"/>
                    </font>
                </Label>
                
                <Label text="IP:" styleClass="field-label" minWidth="25" focusTraversable="false"/>
                <TextField fx:id="vm3IpField" text="192.168.109.103" 
                           prefWidth="140" styleClass="ip-field"/>
                
                <Label text="用户名:" styleClass="field-label" minWidth="45" focusTraversable="false"/>
                <TextField fx:id="vm3UsernameField" text="lyq" 
                           prefWidth="100" styleClass="input-field"/>
                
                <Label text="密码:" styleClass="field-label" minWidth="35" focusTraversable="false"/>
                <PasswordField fx:id="vm3PasswordField" text="123456" 
                               prefWidth="100" styleClass="input-field"/>
                <Button fx:id="vm3PasswordToggleBtn" text="显示" 
                        onAction="#handleVm3PasswordToggle" styleClass="toggle-btn" 
                        prefWidth="45" prefHeight="24"/>
                
                <Label fx:id="vm3StatusLabel" text="" styleClass="status-label" 
                       minWidth="0" maxWidth="0" visible="false" managed="false" focusTraversable="false"/>
                <Button fx:id="vm3TestBtn" text="测试" 
                        onAction="#handleTestVm3Connection" 
                        styleClass="test-btn" prefWidth="70" prefHeight="28"/>
            </HBox>
            <Label fx:id="vm3ErrorLabel" text="" styleClass="error-label" 
                   managed="false" visible="false" focusTraversable="false">
                <padding>
                    <Insets left="95"/>
                </padding>
            </Label>
            
            <Separator prefWidth="720"/>
            
            <!-- 提示信息区域 -->
            <VBox spacing="6" alignment="CENTER_LEFT" styleClass="hint-section">
                <Label text="提示：" styleClass="hint-title" focusTraversable="false">
                    <font>
                        <Font name="System Bold" size="12"/>
                    </font>
                </Label>
                <Label text="1. 请确保3台虚拟机已启动并配置了静态IP地址" 
                       styleClass="hint-text" focusTraversable="false"/>
                <Label text="2. 请确保虚拟机已安装并启动SSH服务" 
                       styleClass="hint-text" focusTraversable="false"/>
                <Label text="3. 请确保宿主机与虚拟机网络互通" 
                       styleClass="hint-text" focusTraversable="false"/>
            </VBox>
        </VBox>
    </center>
    
    <!-- 底部按钮区域 -->
    <bottom>
        <VBox spacing="12" alignment="CENTER" styleClass="footer-section">
            <padding>
                <Insets top="12" right="30" bottom="20" left="30"/>
            </padding>
            
            <Separator prefWidth="720"/>
            
            <HBox spacing="15" alignment="CENTER">
                <Button fx:id="testConnectionBtn" text="测试所有连接" 
                        onAction="#handleTestConnection" 
                        styleClass="primary-btn" prefWidth="130" prefHeight="36">
                    <font>
                        <Font size="13"/>
                    </font>
                </Button>
                
                <ProgressIndicator fx:id="loadingIndicator" 
                                  prefWidth="28" prefHeight="28" 
                                  visible="false" managed="false"/>
                
                <Button fx:id="nextBtn" text="下一步" 
                        onAction="#handleNext" 
                        styleClass="primary-btn" prefWidth="130" prefHeight="36"
                        disable="true">
                    <font>
                        <Font size="13"/>
                    </font>
                </Button>
            </HBox>
        </VBox>
    </bottom>
    
</BorderPane>
