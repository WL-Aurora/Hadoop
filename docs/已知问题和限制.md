# 已知问题和限制

## 版本信息

- **版本**：1.0.0
- **更新日期**：2024-01-01
- **模块**：虚拟机远程连接功能

---

## 已知限制

### 1. 虚拟机数量限制

**限制描述：**

- 当前版本固定支持 3 台虚拟机
- 无法增加或减少虚拟机数量

**影响范围：**

- 无法部署小于 3 台或大于 3 台的集群

**计划改进：**

- 版本 2.0 将支持自定义虚拟机数量（1-10 台）

**临时解决方案：**

- 如需部署不同数量的集群，请手动修改代码

---

### 2. SSH 端口限制

**限制描述：**

- 当前版本固定使用 22 端口
- 无法配置自定义 SSH 端口

**影响范围：**

- 无法连接使用非标准端口的 SSH 服务

**计划改进：**

- 版本 1.1 将支持自定义 SSH 端口配置

**临时解决方案：**

- 在虚拟机上配置 SSH 服务使用 22 端口
- 或修改代码中的端口配置

---

### 3. 认证方式限制

**限制描述：**

- 当前版本仅支持密码认证
- 不支持 SSH 密钥认证

**影响范围：**

- 无法使用密钥对进行免密登录
- 必须输入密码

**计划改进：**

- 版本 1.2 将支持 SSH 密钥认证

**临时解决方案：**

- 使用密码认证方式

---

### 4. 并发集群限制

**限制描述：**

- 当前版本不支持同时管理多个集群
- 只能配置和管理一个集群

**影响范围：**

- 无法在同一应用中管理多个 Hadoop 集群

**计划改进：**

- 版本 2.0 将支持多集群管理

**临时解决方案：**

- 为每个集群使用独立的配置文件
- 或运行多个应用实例

---

### 5. 配置导入导出限制

**限制描述：**

- 当前版本不支持配置文件的导入和导出
- 无法在不同机器间迁移配置

**影响范围：**

- 更换宿主机时需要重新配置

**计划改进：**

- 版本 1.1 将支持配置导入导出功能

**临时解决方案：**

- 手动复制 `~/.hads/config.json` 和 `~/.hads/keys/` 目录

---

### 6. 连接历史记录限制

**限制描述：**

- 当前版本不保存连接历史记录
- 无法查看历史连接状态

**影响范围：**

- 无法追溯历史连接问题

**计划改进：**

- 版本 1.2 将支持连接历史记录功能

**临时解决方案：**

- 查看日志文件获取历史信息

---

## 已知问题

### 1. Windows 平台字体显示问题

**问题描述：**

- 在某些 Windows 系统上，中文字体可能显示为方框
- 影响界面美观性

**影响范围：**

- Windows 7/8/10 部分系统

**严重程度：**

- 低（不影响功能）

**复现步骤：**

1. 在 Windows 系统上启动应用
2. 观察界面中文显示

**临时解决方案：**

- 安装微软雅黑字体
- 或在系统中设置默认中文字体

**状态：**

- 待修复（版本 1.1）

---

### 2. 长时间运行内存占用增加

**问题描述：**

- 应用长时间运行后，内存占用可能逐渐增加
- 可能存在轻微的内存泄漏

**影响范围：**

- 所有平台

**严重程度：**

- 低（正常使用不受影响）

**复现步骤：**

1. 启动应用
2. 连续进行多次连接测试（>100 次）
3. 观察内存占用

**临时解决方案：**

- 定期重启应用
- 避免长时间连续测试

**状态：**

- 调查中

---

### 3. 网络波动导致连接不稳定

**问题描述：**

- 在网络不稳定的环境下，SSH 连接可能频繁断开
- 自动重连机制可能失效

**影响范围：**

- 网络不稳定的环境

**严重程度：**

- 中（影响用户体验）

**复现步骤：**

1. 在网络不稳定的环境下测试连接
2. 观察连接状态

**临时解决方案：**

- 确保网络稳定
- 增加超时时间（修改代码）
- 手动重新测试连接

**状态：**

- 待优化（版本 1.1）

---

### 4. 配置文件并发写入问题

**问题描述：**

- 如果同时运行多个应用实例，可能导致配置文件损坏
- 缺少文件锁机制

**影响范围：**

- 同时运行多个应用实例的场景

**严重程度：**

- 中（可能导致配置丢失）

**复现步骤：**

1. 同时启动两个应用实例
2. 在两个实例中同时保存配置
3. 检查配置文件

**临时解决方案：**

- 避免同时运行多个应用实例
- 如果配置损坏，删除配置文件重新配置

**状态：**

- 待修复（版本 1.1）

---

### 5. 密码包含特殊字符可能导致连接失败

**问题描述：**

- 密码中包含某些特殊字符（如 `$`、`\`、`"`）可能导致 SSH 连接失败
- JSch 库对特殊字符的处理存在问题

**影响范围：**

- 密码包含特殊字符的用户

**严重程度：**

- 中（影响部分用户）

**复现步骤：**

1. 设置虚拟机密码包含特殊字符（如 `Pass$word`）
2. 在应用中输入该密码
3. 测试连接

**临时解决方案：**

- 使用不包含特殊字符的密码
- 或对特殊字符进行转义

**状态：**

- 待修复（版本 1.1）

---

### 6. 日志文件过大导致性能下降

**问题描述：**

- 日志文件过大时，日志写入可能变慢
- 影响应用性能

**影响范围：**

- 长期运行的应用

**严重程度：**

- 低（正常使用不受影响）

**复现步骤：**

1. 长期运行应用
2. 观察日志文件大小
3. 测试应用性能

**临时解决方案：**

- 定期清理日志文件
- 调整日志级别为 WARN 或 ERROR

**状态：**

- 已配置日志滚动策略（单文件最大 100MB）

---

## 性能限制

### 1. 连接测试并发数

**限制描述：**

- 当前版本同时测试 3 台虚拟机
- 未针对大规模并发进行优化

**性能指标：**

- 3 台虚拟机：5-30 秒
- 预计 10 台虚拟机：15-90 秒

**建议：**

- 虚拟机数量 ≤ 10 台

---

### 2. SSH 会话缓存数量

**限制描述：**

- 当前版本缓存所有已建立的 SSH 会话
- 未设置缓存上限

**性能指标：**

- 每个会话约占用 1-2MB 内存
- 建议缓存数量 ≤ 50

**建议：**

- 定期清理不活动的会话

---

### 3. 配置文件大小

**限制描述：**

- 配置文件使用 JSON 格式
- 未针对大文件进行优化

**性能指标：**

- 3 台虚拟机：< 1KB
- 预计 100 台虚拟机：< 50KB

**建议：**

- 配置文件大小 ≤ 1MB

---

## 兼容性限制

### 1. 操作系统兼容性

**支持的操作系统：**

- ✅ Windows 10/11（64 位）
- ✅ CentOS 7（64 位）
- ❌ macOS（未测试）
- ❌ Ubuntu（未测试）
- ❌ Windows 7/8（未测试）

**建议：**

- 在支持的操作系统上运行

---

### 2. JDK 版本兼容性

**支持的 JDK 版本：**

- ✅ JDK 1.8
- ✅ JDK 11
- ✅ JDK 17
- ❌ JDK 7 及以下（不支持）
- ⚠️ JDK 18+ （未测试）

**建议：**

- 使用 JDK 1.8 或 JDK 11

---

### 3. 虚拟机操作系统兼容性

**支持的虚拟机操作系统：**

- ✅ CentOS 7（64 位）
- ⚠️ CentOS 8（未测试）
- ⚠️ Ubuntu 18.04/20.04（未测试）
- ❌ Windows Server（不支持）

**建议：**

- 使用 CentOS 7（64 位）

---

## 安全限制

### 1. 密码加密强度

**当前实现：**

- 使用 AES-256 加密算法
- 密钥存储在本地文件系统

**限制：**

- 密钥未使用硬件加密
- 密钥可能被恶意程序读取

**建议：**

- 在生产环境中使用密钥认证代替密码认证
- 定期更换密码

---

### 2. 日志敏感信息

**当前实现：**

- 密码在日志中脱敏显示（\*\*\*）
- 其他敏感信息可能未完全脱敏

**限制：**

- IP 地址、用户名在日志中明文显示
- 可能泄露部分敏感信息

**建议：**

- 妥善保管日志文件
- 不要将日志文件分享给他人

---

### 3. 配置文件权限

**当前实现：**

- 配置文件使用默认文件权限
- 未强制设置严格的文件权限

**限制：**

- 其他用户可能读取配置文件
- 存在信息泄露风险

**建议：**

- 手动设置文件权限：`chmod 600 ~/.hads/config.json`
- 定期检查文件权限

---

## 报告问题

如果您发现新的问题或限制，请通过以下方式报告：

1. **GitHub Issues**：https://github.com/your-repo/Hadoop/issues
2. **邮箱**：your-email@example.com

报告时请提供：

- 问题描述
- 复现步骤
- 系统环境（操作系统、JDK 版本等）
- 相关日志和截图

---

**文档版本**：1.0.0  
**最后更新**：2024-01-01
